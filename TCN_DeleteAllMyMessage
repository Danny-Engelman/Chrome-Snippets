// ==UserScript==
// @name       Delete all my SMF Forum Messages and Topics
// @namespace  http://use.i.E.your.homepage/
// @version    0.1
// @description  enter something useful
// @match      http://www.transalpclub.nl/forum/index.php*
// @copyright  2012+, You
// ==/UserScript==
if(document.location.href.indexOf('?topic=')>0){
		console.log('lets delete');
		var deleteTopic = document.getElementsByClassName('button_strip_delete');
		if (deleteTopic.length > 0) {
			var DeleteUrl = deleteTopic[0].href;
			console.log('Delete Topic', DeleteUrl);
			w = window.open(DeleteUrl, '', 'width=800; height=700');
			w.close();
		} else {
			var controls = document.querySelectorAll('.remove_button');
			if (controls.length > 0) {
				for (var i = 0; i < controls.length; i++) {
					var DeleteUrl = controls[i].childNodes[0].href;
					console.log('Delete message', DeleteUrl);
					w = window.open(DeleteUrl, '', 'width=800; height=700');
					//var H=w.document.body.innerHTML;
					//if (H.indexOf('')>-1){
					//first topic
					//}
					w.close();
				}
			} else {
				console.log('No deletions');
			}
		}
		window.close();
}
if(document.location.href.indexOf('action=profile')>0){
	var Refs = document.getElementsByTagName('H5');
	if (Refs.length > 0) {
		try {
			if (Refs[0].childNodes[0].childNodes[2].innerText === '"Als de Mod van huis is"') {
				console.log('is overview page');
				for (var i = 1; i < Refs.length; i++) {
					RefUrl = Refs[i].childNodes[0].childNodes[2].href;
					if (i > 0) {
						var w = window.open(RefUrl, '_blank');
						w.focus();
					}
					console.log(RefUrl);
				}
			}
		} catch (e) {

			//window.close();	
		}
	}
}
